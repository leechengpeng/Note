# 红黑树（RB-Tree）
红黑树是一棵平衡二叉搜索树，具有如下性质：
* 任一节点非红即黑，根节点是黑色
* 任一节点至NULL的任意路径，所含的黑色节点数必须相等 --> **规则一：新增节点必须为红色**
* 如果节点为红色，其子结点必须为黑色 --> **规则二：新增节点的父节点必须为黑色**

由上述规则可知：**新增节点本身为红色，其父节点为黑色**。如果新增节点不满足上述规则，就必须调整颜色同时旋转树形结构，以保证树的平衡。

### 插入操作
为了方便描述，做如下定义：
* 插入点：**X**
* X的父节点：**P**
* X的伯父节点：**S**
* X的祖父节点：**G**
* X的曾祖父节点：**GG**
* 外侧插入：被插入点的左子节点
* 内侧插入：被插入点的右子节点

#### 情况1：
RB-Tree为空树，直接插入根节点位置，并将插入点**X**涂成黑色（插入点毕为红色）

#### 情况2：
插入点**X**的父节点**P**为黑色，不违反任何性质，直接插入即可

#### 情况3：
插入点**X**的父节点**P**为红色，其伯父节点**S**为**红色**：
1. 直接将父节点**P**和伯父节点**S**涂成黑色，祖父节点**G**涂成红色（当前以祖父节点**G**为子树满足红黑树的要求）
2. 由于祖父节点**G**为红色（之前为黑色），此时有分为两种情况：
    1. 如果曾祖父节点**GG**为黑色，当前所有节点都满足红色树的规则，**调整完成**
    2. 如果曾祖父节点**GG**为红色，此时将祖父节点**G**及其子树当做一个为红色的子节点，**视情况继续调整**
> 注：由于未旋转树形结构，因此插入点**X**为内外侧插入均可。同时，因为插入之前树为红黑树，所以此情况下的祖父结点**G**必定存在且为黑色，下同

#### 情况4：
插入点**X**的父节点**P**为红色，其伯父节点**S**为**黑色**且**X**为**外侧插入**：
1. 将**P**和**G**变色（P->黑色，G->红色）
2. 进行一次单旋转（此时P就相当于之前G的角色，因此需涂黑，G被涂红则是为了遵守红黑树的规则）

#### 情况5：
插入点**X**的父节点**P**为红色，其伯父节点**S**为**黑色**且**X**为**内侧插入**：
1. 现将节点X和节点P进行一次单旋转，颜色保持不变
2. 通过步骤1，此时的情况和情况4相同，按照情况4操作步骤即可
