# 网络
### 1. 网络模型
网络间的数据通信遵循一系列协议才能进行，实际上可以把网络看做是一系列网络协议。
#### 1.1. OSI七层参考模型
|应用层|表示层|会话层|传输层|网络层|数据链路层|物理层|
|---|---|---|---|---|---|---|
#### 1.2. TCP/IP四层模型
|TCP/IP四层模型|协议族|
|:---|:---|
|应用层|HTTP、FTP、SMTP、IMAP、DNS、DHCP...|
|传输层|TCP、UDP...|
|网络层|IP、ICMP、ARP、RARP|
|网络接口层：数据链路层&物理层|Ethernet、ISDN...|
#### 1.3. 数据封装过程（以太网帧）
|以太网首部|IP首部|TCP首部|*应用数据*|以太网尾部|
|---|---|---|---|---|
### 2. 物理层（Physical Layer）
网络模型的最底层，负责传输01信号，构成网络的基本：光缆、电缆、双绞线...
### 3. 链路层（Link Layer）
单纯的01信号没有太大意义，需要通过链路层将01信号组成一组，表示某一种数据的分段
#### 3.1 以太网协议
一组信号构成一个数据帧，每一帧分为两个部分：标头（18bytes）和数据（46~1500bytes）。因此，一帧的数据大小范围为[64,1518]，如果数据太长，就必须切割数据。
#### 3.2 MAC地址
以太网标头包含接收者和发送者信息，这些信息就是网络设备**唯一**的MAC地址（48bit，12个十六进制数表示）。
#### 3.3 广播
一块网卡通过ARP协议可以获取另一块网卡的MAC地址，然后再通过广播的方式向所有本网络的设备发送数据，然后由接收方自行判断数据是否该自己接收。
### 4. 网络层（Network Layer）
通过IP+MAC地址，网络层可以确定主机到主机的通信。理论上说MAC地址就可以实现数据的发送，但如果通过MAC向整个网络广播数据，肯定会引起数据灾难，此时通过IP地址来区分不同的网络，MAC区分终端。通过**子网掩码**可以确定两个IP是否处于同一个子网，如255.255.255.0与IP做and运算，如果计算结果相同，表示两个IP处于同一个子网。
### 5. 传输层（Transport Layer）
通过端口/套接字（Socket，0~65535），传输层可以确定进程到进程之间的通信。在数据包中添加端口信息，就需要添加新的协议去约束数据的传输：[TCP & UDP](network_tcp_udp.md)。

### 6. 应用层（Application Layer）
互联网是开放架构，数据格式五花八门，因此需要通过应用层来规定应用程序的数据格式。常用的协议有：HTTP、FTP、SMTP/IMAP/POP...

### 7. 访问某个网站使用了哪些协议？
用户访问某网址，分为“地址”和“请求”两部分：
1. 通过DNS协议获取网址对应的IP地址
2. 通过TCP协议与服务器建立连接
3. 通过HTTP协议获取对应的网址内容，并由浏览器解析HTTP协议

### 8. HTTPS
**HTTP**是明文传输，网络任意节点都能获取传输的内容。**HTTPS**实际是在**HTTP**和**TCP**之间添加了一层解密层**TLS/SSL**，这样**HTTP**包在发送到网络上时，都会通过TLS加密过后再发送。

### 9. DNS使用什么协议？
* DNS服务器间进行域传输的时候使用TCP 53
* 客户端查询DNS服务器时使用UDP53，担当DNS查询超过512字节时使用TCP传输（通常UDP的最大报文长度就限制为512字节或更小）



